<!DOCTYPE html>
<!-- ALO CLIENT CHAT v2.2.1 — Feb 20, 2026 — Logout button added -->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Alo">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#FDFBF7">
  
  <!-- Open Graph — link preview when therapist texts URL to client -->
  <meta property="og:title" content="Alo — Someone to think out loud with">
  <meta property="og:description" content="A private space to process your thoughts and emotions. Your therapist recommended Alo as a companion between sessions.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://kanomelvin-prog.github.io/alo-client-chat-full_v1/">
  <meta property="og:image" content="https://kanomelvin-prog.github.io/alo-client-chat-full_v1/og-image.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta name="description" content="Alo is a private emotional support companion. Process thoughts between therapy sessions with Socratic questioning.">
  
  <title>Alo — Someone to think out loud with</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <header>
    <div class="brand">
      <div class="brand-icon">A</div>
      <div class="brand-text">
        <h1 class="brand-name">Alo</h1>
        <span>Someone to think out loud with</span>
        <div id="trustBadge" class="trust-badge guest">
          <span id="trustBadgeText"></span>
        </div>
      </div>
    </div>
    <div class="header-actions">
      <button id="connectBtn" class="btn-primary">Connect</button>
      <button id="logoutBtn" class="btn-link hidden">Log Out</button>
      <button id="privacyBtn" class="hidden">My Privacy</button>
      <button id="messageBtn" class="hidden">Message</button>
      <button id="shareChat">Share</button>
    </div>
  </header>

  <main id="chatMain">
    <!-- Homework card (hidden unless client has active homework) -->
    <div id="homeworkContainer" class="homework-container">
      <div class="homework-card">
        <div class="homework-header">
          <div class="homework-title" id="homeworkTitle">From your therapist</div>
          <button class="homework-collapse" id="homeworkCollapseBtn" 
            aria-label="Toggle homework" 
            aria-controls="homeworkBody" 
            aria-expanded="true">−</button>
        </div>
        <div class="homework-body" id="homeworkBody">
          <p id="homeworkGoal"></p>
          <div class="homework-actions">
            <button class="btn-primary" id="homeworkDoneBtn">✓ I did this</button>
            <button class="btn-link" id="homeworkHideBtn">Hide for now</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Chat iframe -->
    <div class="chat-container">
      <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-message">
          <div class="spinner"></div>
          <p>Loading Alo...</p>
        </div>
      </div>
      
      <iframe
        id="aloFrame"
        src="https://cdn.botpress.cloud/webchat/v3.5/shareable.html?configUrl=https://files.bpcontent.cloud/2026/02/06/16/20260206160131-TJR3ODT9.json"
        allow="clipboard-read; clipboard-write"
        title="Alo Chat Interface"
        aria-label="Chatbot Conversation Window"
      ></iframe>
    </div>
  </main>

  <footer>
    <div class="crisis-notice">
      Alo helps you think — not a therapist or doctor. <span class="crisis-link">Need help now?</span> <a href="tel:988">988 US</a>.
    </div>
    <div class="footer-links">
      <a href="#" id="termsLink">Terms</a>
      <a href="#" id="privacyLink">Privacy Policy</a>
    </div>
  </footer>
  <!-- Modals container -->
  <div id="modalsContainer"></div>

  <!-- Toast container -->
  <div id="toastContainer" class="toast-container"></div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.0/dist/umd/supabase.min.js"></script>
  <script>
    const SUPABASE_URL = 'https://lelsdezstbnzyxvsvbyx.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxlbHNkZXpzdGJuenl4dnN2Ynl4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzgwMTIyOTEsImV4cCI6MjA1MzU4ODI5MX0.VW0LhR-X31KCN9j8KOcQbPBTXzFxGxf6rOjY8pM';
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    let clientId = null;
    let therapistLink = null;
    let chatSettings = {};

    // =====================================================
    // TOAST NOTIFICATIONS
    // =====================================================
    function showToast(message, duration = 3000) {
      const container = document.getElementById('toastContainer');
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      container.appendChild(toast);

      setTimeout(() => toast.classList.add('show'), 10);
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 300);
      }, duration);
    }

    // =====================================================
    // MODAL SYSTEM
    // =====================================================
    function createModal(title, bodyHTML, options = {}) {
      const {
        confirmLabel = 'Confirm',
        cancelLabel = 'Cancel',
        onConfirm = null,
        onCancel = null,
        showCancel = true,
        dangerous = false
      } = options;

      const modalId = 'modal-' + Date.now();
      const modalHTML = `
        <div class="modal-overlay" id="${modalId}" role="dialog" aria-modal="true" aria-labelledby="${modalId}-title">
          <div class="modal-content">
            <div class="modal-header">
              <h2 id="${modalId}-title">${title}</h2>
              <button class="modal-close" aria-label="Close dialog">&times;</button>
            </div>
            <div class="modal-body">
              ${bodyHTML}
            </div>
            <div class="modal-footer">
              ${showCancel ? `<button class="btn-secondary modal-cancel">${cancelLabel}</button>` : ''}
              <button class="btn-primary modal-confirm ${dangerous ? 'btn-danger' : ''}">${confirmLabel}</button>
            </div>
          </div>
        </div>
      `;

      const container = document.getElementById('modalsContainer');
      container.insertAdjacentHTML('beforeend', modalHTML);

      const modal = document.getElementById(modalId);
      const closeBtn = modal.querySelector('.modal-close');
      const cancelBtn = modal.querySelector('.modal-cancel');
      const confirmBtn = modal.querySelector('.modal-confirm');

      const firstInput = modal.querySelector('input, textarea, select');
      if (firstInput) {
        setTimeout(() => firstInput.focus(), 100);
      } else {
        setTimeout(() => confirmBtn.focus(), 100);
      }

      function closeModal() {
        modal.classList.add('closing');
        setTimeout(() => modal.remove(), 300);
      }

      closeBtn.addEventListener('click', () => {
        if (onCancel) onCancel();
        closeModal();
      });

      if (cancelBtn) {
        cancelBtn.addEventListener('click', () => {
          if (onCancel) onCancel();
          closeModal();
        });
      }

      confirmBtn.addEventListener('click', async () => {
        if (onConfirm) {
          const result = await onConfirm();
          if (result !== false) closeModal();
        } else {
          closeModal();
        }
      });

      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          if (onCancel) onCancel();
          closeModal();
        }
      });

      document.addEventListener('keydown', function escHandler(e) {
        if (e.key === 'Escape' && document.getElementById(modalId)) {
          if (onCancel) onCancel();
          closeModal();
          document.removeEventListener('keydown', escHandler);
        }
      });

      setTimeout(() => modal.classList.add('show'), 10);

      return modal;
    }
    // =====================================================
    // CONFIRM DIALOG
    // =====================================================
    function showConfirm(title, message, options = {}) {
      return new Promise((resolve) => {
        createModal(
          title,
          `<p>${message}</p>`,
          {
            ...options,
            onConfirm: () => {
              resolve(true);
            },
            onCancel: () => {
              resolve(false);
            }
          }
        );
      });
    }

    // =====================================================
    // UI STATE MANAGEMENT
    // =====================================================
    function showLoggedInNoConnection() {
      const badge = document.getElementById('trustBadge');
      const badgeText = document.getElementById('trustBadgeText');
      badge.className = 'trust-badge';
      badgeText.textContent = 'Logged in';
      badge.style.display = 'flex';
      document.getElementById('connectBtn').classList.remove('hidden');
      document.getElementById('logoutBtn').classList.remove('hidden');
    }

    function showConnectedUI(therapistName, clientName) {
      const badge = document.getElementById('trustBadge');
      const badgeText = document.getElementById('trustBadgeText');
      
      badge.className = 'trust-badge connected';
      
      if (!badge.querySelector('svg')) {
        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        svg.setAttribute('fill', 'none');
        svg.setAttribute('viewBox', '0 0 24 24');
        svg.setAttribute('stroke', 'currentColor');
        svg.setAttribute('stroke-width', '2');
        svg.style.width = '12px';
        svg.style.height = '12px';
        
        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        path.setAttribute('stroke-linecap', 'round');
        path.setAttribute('stroke-linejoin', 'round');
        path.setAttribute('d', 'M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z');
        
        svg.appendChild(path);
        badge.insertBefore(svg, badgeText);
      }
      
      badgeText.textContent = `Hi ${clientName} · with ${therapistName}`;
      
      document.getElementById('connectBtn').classList.add('hidden');
      document.getElementById('logoutBtn').classList.remove('hidden');
      document.getElementById('privacyBtn').classList.remove('hidden');
      
      if (chatSettings.messaging_enabled) {
        document.getElementById('messageBtn').classList.remove('hidden');
      }
    }

    async function loadHomework() {
      try {
        const homework = await api(`/rest/v1/homework_cards?client_id=eq.${clientId}&is_active=eq.true&order=created_at.desc&limit=1`);
        
        if (homework && homework.length > 0) {
          const hw = homework[0];
          document.getElementById('homeworkTitle').textContent = hw.title || 'From your therapist';
          document.getElementById('homeworkGoal').textContent = hw.goal || '';
          document.getElementById('homeworkContainer').classList.add('show');
        }
      } catch (err) {
        console.error('Error loading homework:', err);
      }
    }

    function handleHomeworkDone() {
      showConfirm(
        'Mark as complete?',
        'This will let your therapist know you completed this exercise.',
        {
          confirmLabel: 'Yes, I did this',
          cancelLabel: 'Not yet',
          onConfirm: async () => {
            showToast('Marked complete');
            document.getElementById('homeworkContainer').classList.remove('show');
          }
        }
      );
    }

    function handleShareChat() {
      showConfirm(
        'Share this conversation?',
        'Alo never shares conversations automatically. You can copy and share them if you want to.',
        { confirmLabel: 'Copy chat', cancelLabel: 'Cancel' }
      );
    }

    // =====================================================
    // LOGOUT HANDLER
    // =====================================================
    async function handleLogout() {
      const { error } = await supabase.auth.signOut();
      if (error) {
        console.error('Error signing out:', error);
        showToast('Error signing out. Please try again.');
        return;
      }
      
      // Clear local state
      clientId = null;
      therapistLink = null;
      chatSettings = {};
      
      // Reload to reset to guest mode
      location.reload();
    }

    // =====================================================
    // CONNECT MODAL
    // =====================================================
    function showConnectModal() {
      const modal = createModal('Connect to Your Therapist', `
        <p>Connecting lets your therapist send you exercises and lets you message them between sessions. <strong>They never see your conversations with Alo.</strong></p>
        <p style="font-size: 13px; color: var(--text-secondary); margin-top: 4px;">Enter the invite code your therapist gave you to link your account.</p>
        <div style="margin-top: 16px;">
          <input type="text" id="inviteCodeInput" placeholder="Enter invite code" 
            style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 16px;" 
            autocomplete="off" />
        </div>
      `, {
        confirmLabel: 'Connect',
        cancelLabel: 'Maybe later',
        onConfirm: async () => {
          const code = document.getElementById('inviteCodeInput').value.trim();
          if (!code) {
            showToast('Please enter an invite code');
            return false;
          }
          await handleConnectSubmit(code);
        }
      });
    }

    async function handleConnectSubmit(inviteCode) {
      const { data: { user } } = await supabase.auth.getUser();
      
      if (!user) {
        showLoginModal(inviteCode);
        return;
      }

      try {
        const link = await api(`/rest/v1/therapist_client_links?invite_code=eq.${inviteCode}&status=eq.pending`, 'GET');
        
        if (!link || link.length === 0) {
          showToast('Invalid invite code');
          return;
        }

        const linkId = link[0].id;
        await api(`/rest/v1/therapist_client_links?id=eq.${linkId}`, 'PATCH', {
          client_id: user.id,
          status: 'active'
        });

        showToast('Connected successfully!');
        await loadConnectedState();
      } catch (err) {
        console.error('Connection error:', err);
        showToast('Connection failed. Please try again.');
      }
    }
    // =====================================================
    // LOGIN MODAL
    // =====================================================
    function showLoginModal(inviteCode = null) {
      const modal = createModal('Sign In or Create Account', `
        <p>Create an account or sign in to connect with your therapist.</p>
        <div style="margin-top: 16px;">
          <input type="email" id="emailInput" placeholder="Email" 
            style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 16px; margin-bottom: 12px;" 
            autocomplete="email" />
          <input type="password" id="passwordInput" placeholder="Password" 
            style="width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 16px;" 
            autocomplete="current-password" />
        </div>
      `, {
        confirmLabel: 'Continue',
        cancelLabel: 'Cancel',
        onConfirm: async () => {
          const email = document.getElementById('emailInput').value.trim();
          const password = document.getElementById('passwordInput').value;
          
          if (!email || !password) {
            showToast('Please enter email and password');
            return false;
          }

          let authResult = await supabase.auth.signInWithPassword({ email, password });
          
          if (authResult.error?.message.includes('Invalid login credentials')) {
            authResult = await supabase.auth.signUp({ email, password });
          }

          if (authResult.error) {
            showToast('Authentication failed. Please try again.');
            return false;
          }

          showToast('Signed in successfully');

          if (inviteCode) {
            await handleConnectSubmit(inviteCode);
          } else {
            await loadConnectedState();
          }
        }
      });
    }

    // =====================================================
    // MESSAGE MODAL
    // =====================================================
    function showMessageModal() {
      const therapistName = therapistLink ? document.getElementById('trustBadgeText').textContent.split('with ')[1] : 'your therapist';
      
      const modal = createModal(`Message ${therapistName}`, `
        <p style="font-size: 14px; color: var(--text-secondary); margin-bottom: 16px;">
          ${therapistName} will see this message in their dashboard. They'll respond when they can.
        </p>
        <textarea id="messageTextarea" placeholder="Type your message..." 
          style="width: 100%; min-height: 120px; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 16px; font-family: inherit; resize: vertical;"
        ></textarea>
      `, {
        confirmLabel: 'Send',
        cancelLabel: 'Cancel',
        onConfirm: async () => {
          const messageText = document.getElementById('messageTextarea').value.trim();
          if (!messageText) {
            showToast('Please enter a message');
            return false;
          }

          try {
            await api('/rest/v1/client_messages', 'POST', {
              client_id: clientId,
              therapist_id: therapistLink.therapist_id,
              message_text: messageText,
              read_by_therapist: false
            });

            showToast('Message sent');
          } catch (err) {
            console.error('Error sending message:', err);
            showToast('Failed to send message. Please try again.');
            return false;
          }
        }
      });
    }

    // =====================================================
    // PRIVACY MODAL
    // =====================================================
    function showPrivacyModal() {
      const therapistName = document.getElementById('trustBadgeText').textContent.split('with ')[1] || 'your therapist';
      
      createModal('Your Privacy', `
        <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px;">What ${therapistName} sees</h3>
        <ul style="font-size: 14px; line-height: 1.6; margin-bottom: 20px; padding-left: 20px;">
          <li>Whether you've used Alo recently</li>
          <li>If you completed homework exercises</li>
          <li>Messages you send them directly</li>
        </ul>
        
        <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px;">What they never see</h3>
        <ul style="font-size: 14px; line-height: 1.6; margin-bottom: 20px; padding-left: 20px;">
          <li><strong>Your conversations with Alo</strong></li>
          <li>What you talked about</li>
          <li>How you're feeling</li>
        </ul>
        
        <p style="font-size: 13px; color: var(--text-secondary); margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border-color);">
          Alo is a private space. Your therapist trusts you to share what matters when you're ready.
        </p>
      `, {
        confirmLabel: 'Got it',
        showCancel: false
      });
    }

    // =====================================================
    // SHARE MODAL
    // =====================================================
    function showShareModal() {
      const therapistName = document.getElementById('trustBadgeText').textContent.split('with ')[1] || 'your therapist';
      
      createModal('Share This Conversation', `
        <p style="margin-bottom: 16px;">Copy your conversation with Alo to share with ${therapistName} or save for yourself.</p>
        <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 20px;">
          <strong>Note:</strong> This feature extracts text from the chat below. Formatting may vary.
        </p>
      `, {
        confirmLabel: 'Copy conversation',
        cancelLabel: 'Cancel',
        onConfirm: async () => {
          try {
            const conversationText = "Alo Conversation\n\n[Conversation extraction from iframe - implementation pending]\n\nThis feature will copy your conversation when fully implemented.";
            
            await navigator.clipboard.writeText(conversationText);
            showToast('Conversation copied to clipboard');
          } catch (err) {
            console.error('Error copying conversation:', err);
            showToast('Could not copy conversation. Please try again.');
            return false;
          }
        }
      });
    }

    // =====================================================
    // API HELPER
    // =====================================================
    async function api(endpoint, method = 'GET', body = null) {
      const { data: { session } } = await supabase.auth.getSession();
      
      const options = {
        method,
        headers: {
          'Content-Type': 'application/json',
          'apikey': SUPABASE_ANON_KEY,
          'Authorization': session ? `Bearer ${session.access_token}` : `Bearer ${SUPABASE_ANON_KEY}`
        }
      };

      if (body && method !== 'GET') {
        options.body = JSON.stringify(body);
      }

      const response = await fetch(`${SUPABASE_URL}${endpoint}`, options);
      
      if (!response.ok) {
        throw new Error(`API error: ${response.status}`);
      }

      const text = await response.text();
      return text ? JSON.parse(text) : null;
    }
    // =====================================================
    // LOAD CONNECTED STATE
    // =====================================================
    async function loadConnectedState() {
      try {
        const { data: { user } } = await supabase.auth.getUser();
        
        if (!user) {
          resetToGuestUI();
          return;
        }

        const links = await api(`/rest/v1/therapist_client_links?client_id=eq.${user.id}&status=eq.active`);
        
        if (!links || links.length === 0) {
          showLoggedInNoConnection();
          return;
        }

        therapistLink = links[0];
        clientId = user.id;

        const therapist = await api(`/rest/v1/profiles?id=eq.${therapistLink.therapist_id}&select=display_name`);
        const client = await api(`/rest/v1/profiles?id=eq.${user.id}&select=display_name`);

        const therapistName = therapist?.[0]?.display_name || 'Your therapist';
        const clientName = client?.[0]?.display_name || 'there';

        const settings = await api(`/rest/v1/therapist_client_links?id=eq.${therapistLink.id}&select=messaging_enabled`);
        chatSettings = settings?.[0] || {};

        showConnectedUI(therapistName, clientName);
        await loadHomework();

      } catch (err) {
        console.error('Error loading connected state:', err);
      }
    }

    function resetToGuestUI() {
      const badge = document.getElementById('trustBadge');
      const badgeText = document.getElementById('trustBadgeText');
      badge.className = 'trust-badge guest';
      badgeText.textContent = '';
      
      const svg = badge.querySelector('svg');
      if (svg) svg.remove();
      
      document.getElementById('connectBtn').classList.remove('hidden');
      document.getElementById('logoutBtn').classList.add('hidden');
      document.getElementById('messageBtn').classList.add('hidden');
      document.getElementById('privacyBtn').classList.add('hidden');
      document.getElementById('homeworkContainer').classList.remove('show');
    }

    // =====================================================
    // INITIALIZATION
    // =====================================================
    document.addEventListener('DOMContentLoaded', async function() {
      const iframe = document.getElementById('aloFrame');
      const loadingOverlay = document.getElementById('loadingOverlay');
      let loadTimeout;

      iframe.addEventListener('load', function() {
        loadingOverlay.style.display = 'none';
        clearTimeout(loadTimeout);
      });

      loadTimeout = setTimeout(function() {
        loadingOverlay.innerHTML = `
          <div class="error-message">
            <p><strong>Still loading...</strong></p>
            <p>This is taking longer than usual. Let's try again.</p>
            <button onclick="location.reload()">Retry</button>
            <p style="font-size: 13px; margin-top: 20px; color: var(--text-secondary);">
              Need help now? Call <a href="tel:988" style="color: var(--text-primary);">988</a>
            </p>
          </div>
        `;
      }, 15000);

      document.getElementById('connectBtn').addEventListener('click', showConnectModal);
      document.getElementById('logoutBtn').addEventListener('click', handleLogout);
      document.getElementById('privacyBtn').addEventListener('click', showPrivacyModal);
      document.getElementById('messageBtn').addEventListener('click', showMessageModal);
      document.getElementById('shareChat').addEventListener('click', showShareModal);
      
      document.getElementById('homeworkDoneBtn').addEventListener('click', handleHomeworkDone);
      
      document.getElementById('homeworkCollapseBtn').addEventListener('click', function() {
        const body = document.getElementById('homeworkBody');
        const btn = this;
        const isCollapsed = body.classList.contains('collapsed');
        body.classList.toggle('collapsed');
        btn.textContent = isCollapsed ? '−' : '+';
        btn.setAttribute('aria-expanded', isCollapsed ? 'true' : 'false');
      });

      document.getElementById('homeworkHideBtn').addEventListener('click', function() {
        document.getElementById('homeworkContainer').classList.remove('show');
        showToast('Homework hidden. Your therapist can still see if you completed it.');
      });

      document.getElementById('termsLink').addEventListener('click', function(e) {
        e.preventDefault();
        createModal('Terms of Use', `
          <p>Alo is a conversational companion, not a replacement for professional mental health care.</p>
          <p style="margin-top: 12px;"><strong>By using Alo, you agree that:</strong></p>
          <ul style="margin: 12px 0; padding-left: 20px; line-height: 1.6;">
            <li>Alo does not provide medical advice, diagnosis, or treatment</li>
            <li>You will seek professional help for mental health crises</li>
            <li>Your therapist does not see your conversations with Alo</li>
            <li>You are responsible for deciding what to share with your therapist</li>
          </ul>
          <p style="margin-top: 12px; font-size: 13px; color: var(--text-secondary);">
            If you're in crisis, call <strong>988</strong> (US Suicide & Crisis Lifeline) or go to your nearest emergency room.
          </p>
        `, {
          confirmLabel: 'I understand',
          showCancel: false
        });
      });

      document.getElementById('privacyLink').addEventListener('click', function(e) {
        e.preventDefault();
        createModal('Privacy Policy', `
          <h3 style="font-size: 16px; margin-bottom: 12px;">What we collect</h3>
          <ul style="margin-bottom: 16px; padding-left: 20px; line-height: 1.6;">
            <li>Account information (email, password hash)</li>
            <li>Connection to your therapist</li>
            <li>Homework completion status</li>
            <li>Messages you send to your therapist</li>
          </ul>

          <h3 style="font-size: 16px; margin-bottom: 12px;">What we don't collect</h3>
          <ul style="margin-bottom: 16px; padding-left: 20px; line-height: 1.6;">
            <li><strong>Your conversations with Alo</strong></li>
            <li>Chat transcripts or history</li>
            <li>Personal details you share with Alo</li>
          </ul>

          <h3 style="font-size: 16px; margin-bottom: 12px;">Who sees your data</h3>
          <ul style="margin-bottom: 16px; padding-left: 20px; line-height: 1.6;">
            <li>Your therapist sees homework status and messages you send them</li>
            <li>Your therapist <strong>never</strong> sees your Alo conversations</li>
            <li>We don't sell or share your data with third parties</li>
          </ul>

          <p style="font-size: 13px; color: var(--text-secondary); margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border-color);">
            Questions? Contact your therapist or email support@alo.example.com
          </p>
        `, {
          confirmLabel: 'Got it',
          showCancel: false
        });
      });

      await loadConnectedState();
    });
  </script>
</body>
</html>
